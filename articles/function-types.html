<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Function types • vctrs</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Function types">
<meta property="og:description" content="">
<meta property="og:image" content="https://vctrs.r-lib.org/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vctrs</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/double-dispatch.html">Double dispatch</a>
    </li>
    <li>
      <a href="../articles/function-types.html">Function types</a>
    </li>
    <li>
      <a href="../articles/s3-base.html">Base classes</a>
    </li>
    <li>
      <a href="../articles/s3-proxy.html">Proxy generics</a>
    </li>
    <li>
      <a href="../articles/s3-vector.html">S3 vectors</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/vctrs">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Function types</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/vctrs/blob/master/vignettes/function-types.Rmd"><code>vignettes/function-types.Rmd</code></a></small>
      <div class="hidden name"><code>function-types.Rmd</code></div>

    </div>

    
    
<p>A useful way to understand the high-level structure of a function is to think about its <strong>type</strong>. Instead of worrying about the specific values that are returned, we can just think about the classes involved. For example, if you <code>c()</code> together an integer and double vector you get a double vector. To express this more succinctly, we’ll adopt a convention common in other programming langauges and write the class<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> of the vector in angle brackets like <code>&lt;integer&gt;</code>, <code>&lt;double&gt;</code>. Then we can describe <code>c()</code> as <code>c(&lt;integer&gt;, &lt;double&gt;)</code> -&gt; <code>&lt;double&gt;</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(vctrs)</a></code></pre></div>
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>The primary motivation comes from two separate, but related problems. The first problem is that <code><a href="http://www.rdocumentation.org/packages/base/topics/c">base::c()</a></code> has rather undesirable behaviour when you mix different S3 vectors:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># combining factors makes integers</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">c</span>(<span class="kw">factor</span>(<span class="st">"a"</span>), <span class="kw">factor</span>(<span class="st">"b"</span>))</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; [1] 1 1</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co"># even if you combine with a string</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="kw">c</span>(<span class="st">"a"</span>, <span class="kw">factor</span>(<span class="st">"a"</span>))</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; [1] "a" "1"</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co"># combing dates and date-times give incorrect values</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">dt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"2020-01-1"</span>)</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">dttm &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(dt)</a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="kw">c</span>(dt, dttm)</a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; [1] "2020-01-01"    "4321940-06-07"</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="kw">c</span>(dttm, dt)</a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; [1] "2020-01-01 00:00:00 UTC" "1970-01-01 05:04:22 UTC"</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co"># as do combining dates and factors</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="kw">c</span>(dt, <span class="kw">factor</span>(<span class="st">"a"</span>))</a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; [1] "2020-01-01" "1970-01-02"</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="kw">c</span>(<span class="kw">factor</span>(<span class="st">"a"</span>), dt)</a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; [1]     1 18262</span></a></code></pre></div>
<p>This behaviour arises because <code>c()</code> has dual purposes: as well as it’s primary duty of combining vectors, it has a secondary duty of stripping attributes. For example, <code>?POSIXct</code> suggests that you should use <code>c()</code> if you want to reset the timezone. A detailed comparison of vctrs vs base R behaviour can at the end of this vignette.</p>
<p>The second problem is that <code>dplyr::bind_rows()</code> is not extensible by others. Currently, it handles arbitrary S3 classes using heuristics, but these often fail, and it feels like we really need to think through the problem in order to build a principled solution. This intersects with the need to cleanly support more types of data frame columns including lists of data frames, data frames, and matrices.</p>
</div>
<div id="basics" class="section level2">
<h2 class="hasAnchor">
<a href="#basics" class="anchor"></a>Basics</h2>
<p><code><a href="../reference/vec_c.html">vec_c()</a></code> works like <code>c()</code>, but has stricter coercion rules:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="ot">TRUE</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [1] 1 1</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(1L, <span class="fl">1.5</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; [1] 1.0 1.5</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="fl">1.5</span>, <span class="st">"x"</span>)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; Error: No common type for &lt;double&gt; and &lt;character&gt;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; Call `rlang::last_error()` to see a backtrace</span></a></code></pre></div>
<p>Unlike <code>c()</code>, you can optionally specify the desired output class by supplying a <strong>prototype</strong>, or ptype, for short:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dt">.ptype =</span> <span class="kw">integer</span>())</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; [1] 1 2</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="dv">1</span>, <span class="st">"x"</span>, <span class="dt">.ptype =</span> <span class="kw">character</span>())</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; [1] "1" "x"</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="dv">1</span>, <span class="st">"x"</span>, <span class="dt">.ptype =</span> <span class="kw">list</span>())</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; [1] "x"</span></a></code></pre></div>
<p>This supports a much wider range of casts (more on that below) than the automatic coercions, but it can still fail:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="kw">Sys.Date</span>(), <span class="dt">.ptype =</span> <span class="kw">factor</span>())</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; Error: Can't cast &lt;date&gt; to &lt;factor&lt;&gt;&gt;</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; Call `rlang::last_error()` to see a backtrace</span></a></code></pre></div>
<p><code><a href="../reference/vec_c.html">vec_c()</a></code> works in two steps. First it finds a common prototype by calling <code><a href="../reference/vec_ptype.html">vec_ptype()</a></code>. Then it casts each input to that prototype by calling <code><a href="../reference/vec_cast.html">vec_cast()</a></code>. Before we can talk about those important functions we need to define exactly what a prototype is.</p>
<div id="what-is-a-prototype" class="section level3">
<h3 class="hasAnchor">
<a href="#what-is-a-prototype" class="anchor"></a>What is a prototype?</h3>
<p>Internally, vctrs represents the class of a vector with a 0-length subset. We call this a prototype, because it’s a miniature version of the vector that contains all of the attributes but none of the data. Conveniently, you can create many prototypes using existing base functions (e.g, <code>double()</code>, <code>factor(levels = c("a", "b"))</code>).</p>
<p>You can use <code><a href="../reference/vec_ptype.html">vec_ptype()</a></code> to create a prototype from an existing object. It has a print method that summarises the prototype:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(letters)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; prototype: character</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; prototype: integer</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; prototype: list</span></a></code></pre></div>
<p>Some protoypes have parameters that affect their behaviour. These are displayed where possible:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Factors display a hash of their levels; this lets</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co"># you distinguish different factors at a glance</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">factor</span>(<span class="st">"a"</span>))</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; prototype: factor&lt;127a2&gt;</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">factor</span>(<span class="st">"b"</span>))</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; prototype: factor&lt;ddf10&gt;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co"># Date-times display their timezone</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">Sys.time</span>())</a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; prototype: datetime&lt;local&gt;</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co"># difftimes display their units</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">as.difftime</span>(<span class="dv">10</span>, <span class="dt">units =</span> <span class="st">"mins"</span>))</a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; prototype: duration&lt;mins&gt;</span></a></code></pre></div>
</div>
<div id="coercion-and-casting" class="section level3">
<h3 class="hasAnchor">
<a href="#coercion-and-casting" class="anchor"></a>Coercion and casting</h3>
<p>vctrs defines the relationship between classes with two functions: <code><a href="../reference/vec_type2.html">vec_type2()</a></code> and <code><a href="../reference/vec_cast.html">vec_cast()</a></code>. <code><a href="../reference/vec_type2.html">vec_type2()</a></code> is used to find the common type of two prototypes if it exists. <code><a href="../reference/vec_type2.html">vec_type2()</a></code> is commutative, which means that <code>vec_type2(x, y) == vec_type2(y, x)</code>.</p>
<p>The easiest way to explore coercion is to give multiple arguments to <code><a href="../reference/vec_ptype.html">vec_ptype()</a></code>. It uses <code><a href="../reference/vec_type2.html">vec_type2()</a></code> to find the common type and displays the results in a convenient form:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">integer</span>(), <span class="kw">double</span>())</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; prototype: double</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">Sys.Date</span>(), <span class="kw">Sys.time</span>())</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; prototype: datetime&lt;local&gt;</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co"># no common type</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">factor</span>(), <span class="kw">Sys.Date</span>())</a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; Error: No common type for &lt;factor&lt;&gt;&gt; and &lt;date&gt;</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; Call `rlang::last_error()` to see a backtrace</span></a></code></pre></div>
<p><code><a href="../reference/vec_cast.html">vec_cast()</a></code> is used for explicit casts: given a value and a prototype, it casts the value to the prototype or throws an error stating that the cast is not possible. If a cast is possible in general (i.e. double -&gt; integer), but information is lost for a specific input (e.g. 1.5 -&gt; 1), it will generate a warning.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Cast succeeds</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="../reference/vec_cast.html">vec_cast</a></span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="kw">integer</span>())</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; [1] 1 2</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co"># Cast loses information</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw"><a href="../reference/vec_cast.html">vec_cast</a></span>(<span class="kw">c</span>(<span class="fl">1.5</span>, <span class="dv">2</span>), <span class="kw">integer</span>())</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; Warning: Lossy cast from &lt;double&gt; to &lt;integer&gt;</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; Locations: 1</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; [1] 1 2</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co"># Cast fails</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="kw"><a href="../reference/vec_cast.html">vec_cast</a></span>(<span class="kw">c</span>(<span class="fl">1.5</span>, <span class="fl">2.5</span>), <span class="kw">factor</span>(<span class="st">"a"</span>))</a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; Error: Can't cast &lt;double&gt; to &lt;factor&lt;127a2&gt;&gt;</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; Call `rlang::last_error()` to see a backtrace</span></a></code></pre></div>
<p>The set of possible casts is a subset of possible automatic coercions. The following diagram summarises both casts (arrows) and coercions (circles) for all base types supported by vctrs:</p>
<p><img src="../man/figures/combined.png"></p>
</div>
<div id="algebra" class="section level3">
<h3 class="hasAnchor">
<a href="#algebra" class="anchor"></a>Algebra</h3>
<p><code><a href="../reference/vec_type2.html">vec_type2()</a></code> is a binary operator defined on the set of types. We will call the result of <code><a href="../reference/vec_type2.html">vec_type2(x, y)</a></code> the <strong>commmon type</strong> of <code>x</code> and <code>y</code>. The common type is only defined for a small set of pairs. If the common type does exist, we can say that <code>x</code> and <code>y</code> are uncoercable.</p>
<p>It has three useful properties:</p>
<ul>
<li>It is associative: <code>vec_type2(x, vec_type2(y, z)) == vec_type2(vec_type2(x, y), z)</code>
</li>
<li>It is commutative: <code>vec_type2(x, y) == vec_type2(y, x)</code>
</li>
<li>It has an identity element, <code>NULL</code>: <code>vec_type2(x, NULL) == x</code>
</li>
</ul>
<p>Together, this means the type system forms a <strong>commutative monoid</strong>, which has a couple of appealing properties:</p>
<ul>
<li><p>When have multiple types we can find their common type by progressively reducing (aka folding) <code><a href="../reference/vec_type2.html">vec_type2()</a></code>. We’ll get the same results regardless of whether we reduce from left or right.</p></li>
<li><p>The operation of finding common type is <a href="https://en.wikipedia.org/wiki/Prefix_sum#Parallel_algorithm">parallelisable</a>. For practial input size, parallelism is unlikely to helpful, but it’s nice property to have in general.</p></li>
</ul>
</div>
</div>
<div id="base-classes" class="section level2">
<h2 class="hasAnchor">
<a href="#base-classes" class="anchor"></a>Base classes</h2>
<div id="matrices-and-arrays" class="section level3">
<h3 class="hasAnchor">
<a href="#matrices-and-arrays" class="anchor"></a>Matrices and arrays</h3>
<p>Any bare vector can have a <code>dim</code> attribute which turns it into a matrix or array. The prototype of matrices and arrays includes the “shape”, all the dimensions apart from the first:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">array</span>(<span class="dv">1</span>, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">10</span>)))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; prototype: double[,10]</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">array</span>(<span class="dv">1</span>, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">10</span>)))</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; prototype: double[,10,10]</span></a></code></pre></div>
<p>Length 1 dimensions are automatically broadcast:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">array</span>(<span class="ot">TRUE</span>, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>)), <span class="kw">array</span>(<span class="dv">1</span>, <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">2</span>)))</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; prototype: double[,2]</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="kw">array</span>(<span class="ot">TRUE</span>, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)), <span class="kw">array</span>(<span class="dv">1</span>, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)))</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt; prototype: double[,4,3]</span></a></code></pre></div>
<p>And lower-dimensional arrays will be automatically expanded to higher:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(<span class="ot">TRUE</span>, <span class="kw">array</span>(<span class="dv">1</span>, <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">2</span>)))</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; prototype: double[,10,2]</span></a></code></pre></div>
</div>
<div id="factors" class="section level3">
<h3 class="hasAnchor">
<a href="#factors" class="anchor"></a>Factors</h3>
<p>The commutativity of <code><a href="../reference/vec_type2.html">vec_type2()</a></code> only applies to the prototype, not its parameters. For example, factor levels are combined on in the order in which they are seen:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">fa &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="st">"a"</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">fb &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="st">"b"</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="kw">levels</span>(<span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(fa, fb)[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; [1] "a" "b"</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="kw">levels</span>(<span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(fb, fa)[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; [1] "b" "a"</span></a></code></pre></div>
</div>
<div id="data-frames" class="section level3">
<h3 class="hasAnchor">
<a href="#data-frames" class="anchor"></a>Data frames</h3>
<p>The prototype of data frame contains the prototypes of its columns:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="ot">TRUE</span>, <span class="dt">y =</span> 1L)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df1)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt;   x: logical</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;   y: integer</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; &gt;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"></a>
<a class="sourceLine" id="cb14-8" data-line-number="8">df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">z =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df2)</a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;   x: double</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt;   z: double</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; &gt;</span></a></code></pre></div>
<p>The common type of two data frames is the common type of each column that occurs in both data frame frames, and the union of the columns that only occur in one:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df1, df2)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt;   x: double</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt;   y: integer</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt;   z: double</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; &gt;</span></a></code></pre></div>
<p>Like factors, the order of variables in the data frame is not commutative, and depends on the order of the inputs:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df1, df2)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt;   x: double</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt;   y: integer</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt;   z: double</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; &gt;</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df2, df1)</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt;   x: double</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt;   z: double</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt;   y: integer</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt; &gt;</span></a></code></pre></div>
<p>Data frames are interesting because they are recursive: a data frame can have a column that is also a data frame. vctrs knows how to handle these too:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">df3 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> 2L)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">df3<span class="op">$</span>a &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="dv">2</span>, <span class="dt">b =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df3)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt;   x: integer</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt;   a: </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt;     data.frame&lt;</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt;       a: double</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt;       b: double</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt;     &gt;</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt; &gt;</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"></a>
<a class="sourceLine" id="cb17-13" data-line-number="13">df4 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb17-14" data-line-number="14">df4<span class="op">$</span>a &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">a =</span> <span class="ot">FALSE</span>, <span class="dt">b =</span> <span class="dv">3</span>, <span class="dt">c =</span> <span class="st">"a"</span>)</a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df4)</a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="co">#&gt;   x: double</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="co">#&gt;   a: </span></a>
<a class="sourceLine" id="cb17-19" data-line-number="19"><span class="co">#&gt;     data.frame&lt;</span></a>
<a class="sourceLine" id="cb17-20" data-line-number="20"><span class="co">#&gt;       a: logical</span></a>
<a class="sourceLine" id="cb17-21" data-line-number="21"><span class="co">#&gt;       b: double</span></a>
<a class="sourceLine" id="cb17-22" data-line-number="22"><span class="co">#&gt;       c: factor&lt;127a2&gt;</span></a>
<a class="sourceLine" id="cb17-23" data-line-number="23"><span class="co">#&gt;     &gt;</span></a>
<a class="sourceLine" id="cb17-24" data-line-number="24"><span class="co">#&gt; &gt;</span></a>
<a class="sourceLine" id="cb17-25" data-line-number="25"></a>
<a class="sourceLine" id="cb17-26" data-line-number="26"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(df3, df4)</a>
<a class="sourceLine" id="cb17-27" data-line-number="27"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb17-28" data-line-number="28"><span class="co">#&gt;   x: double</span></a>
<a class="sourceLine" id="cb17-29" data-line-number="29"><span class="co">#&gt;   a: data.frame&lt;&gt;</span></a>
<a class="sourceLine" id="cb17-30" data-line-number="30"><span class="co">#&gt; &gt;</span></a></code></pre></div>
</div>
<div id="list-of" class="section level3">
<h3 class="hasAnchor">
<a href="#list-of" class="anchor"></a>List of</h3>
<p>vctrs provides a new class that represents a list of elements with constant prototype but varying lengths. This is an interesting contrast to a data frame which is a list of elements with constant length, but varying prototypes.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">x1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/list_of.html">list_of</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">8</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(x1)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co">#&gt; prototype: list_of&lt;integer&gt;</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co"># This type is enforced if you attempt to modify the vector</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6">x1[[<span class="dv">4</span>]] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">x1[[<span class="dv">4</span>]]</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt; [1] 0 1 0</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co"># factors() can't be cast to integers</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11">x1[[<span class="dv">5</span>]] &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="st">"x"</span>)</a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">#&gt; Error: Can't cast &lt;factor&lt;5a425&gt;&gt; to &lt;integer&gt;</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">#&gt; Call `rlang::last_error()` to see a backtrace</span></a></code></pre></div>
<p>This provides a natural type for nested data frames:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">by_cyl &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">cyl =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>))</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">by_cyl<span class="op">$</span>data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/list_of.html">as_list_of</a></span>(<span class="kw">split</span>(mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], mtcars<span class="op">$</span>cyl))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(by_cyl)</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; prototype: data.frame&lt;</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt;   cyl : double</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt;   data: </span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#&gt;     list_of&lt;</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">#&gt;       data.frame&lt;</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">#&gt;         mpg : double</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#&gt;         cyl : double</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">#&gt;         disp: double</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">#&gt;       &gt;</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">#&gt;     &gt;</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">#&gt; &gt;</span></a></code></pre></div>
</div>
</div>
<div id="base-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#base-functions" class="anchor"></a>Base functions</h2>
<p>This vignette compares and constrasts existing base R functions with their vctrs equivalents.</p>
<div id="c-and-vec_c" class="section level3">
<h3 class="hasAnchor">
<a href="#c-and-vec_c" class="anchor"></a><code>c()</code> and <code><a href="../reference/vec_c.html">vec_c()</a></code>
</h3>
<div id="atomic-vectors" class="section level4">
<h4 class="hasAnchor">
<a href="#atomic-vectors" class="anchor"></a>Atomic vectors</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># c() will coerce any atomic type to character</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw">c</span>(<span class="dv">1</span>, <span class="st">"x"</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="co">#&gt; [1] "1" "x"</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co"># vctrs is stricter, and requires an explicit cast</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="dv">1</span>, <span class="st">"x"</span>)</a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co">#&gt; Error: No common type for &lt;double&gt; and &lt;character&gt;</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co">#&gt; Call `rlang::last_error()` to see a backtrace</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="dv">1</span>, <span class="st">"x"</span>, <span class="dt">.ptype =</span> <span class="kw">character</span>())</a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt; [1] "1" "x"</span></a></code></pre></div>
</div>
<div id="factors-1" class="section level4">
<h4 class="hasAnchor">
<a href="#factors-1" class="anchor"></a>Factors</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">fa &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="st">"a"</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">fb &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="st">"b"</span>)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="co"># c() strips all factor attributes giving an integer vector</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co"># (as documented in ?c)</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="kw">c</span>(fa, fb)</a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">#&gt; [1] 1 1</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co"># unlist() creates a new factor with the union of the levels </span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10">fs &lt;-<span class="st"> </span><span class="kw">list</span>(fa, fb)</a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="kw">unlist</span>(fs)</a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">#&gt; [1] a b</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">#&gt; Levels: a b</span></a></code></pre></div>
<p>vctrs always unions the levels. This is a somewhat contentious decision, primarily motivated by pragmatics.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(fa, fb)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="co">#&gt; [1] a b</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="co">#&gt; Levels: a b</span></a></code></pre></div>
<p>vctrs doesn’t currently provide an <code>unlist()</code> equivalent, but you can use a tidy dots feature:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="op">!!!</span>fs)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="co">#&gt; [1] a b</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="co">#&gt; Levels: a b</span></a></code></pre></div>
</div>
<div id="time-zones" class="section level4">
<h4 class="hasAnchor">
<a href="#time-zones" class="anchor"></a>Time zones</h4>
<p>As documented, <code>c()</code> strips time zones:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">datetime_nz &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(<span class="st">"2020-01-01 09:00"</span>, <span class="dt">tz =</span> <span class="st">"Pacific/Auckland"</span>)</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="kw">c</span>(datetime_nz)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="co">#&gt; [1] "2019-12-31 20:00:00 UTC"</span></a></code></pre></div>
<p><code><a href="../reference/vec_c.html">vec_c()</a></code> preserves them:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(datetime_nz)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="co">#&gt; [1] "2020-01-01 09:00:00 NZDT"</span></a></code></pre></div>
<p>If there are multiple time zones, vctrs takes the first non-local timezone:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">datetime_local &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(<span class="st">"2020-01-01 09:00"</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">datetime_houston &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(<span class="st">"2020-01-01 09:00"</span>, <span class="dt">tz =</span> <span class="st">"US/Central"</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(datetime_local, datetime_houston)</a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="co">#&gt; prototype: datetime&lt;US/Central&gt;</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(datetime_houston, datetime_nz)</a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="co">#&gt; prototype: datetime&lt;US/Central&gt;</span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="kw"><a href="../reference/vec_ptype.html">vec_ptype</a></span>(datetime_nz, datetime_houston)</a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="co">#&gt; prototype: datetime&lt;Pacific/Auckland&gt;</span></a></code></pre></div>
</div>
<div id="dates-and-date-times" class="section level4">
<h4 class="hasAnchor">
<a href="#dates-and-date-times" class="anchor"></a>Dates and date-times</h4>
<p>Combining dates and date-times with <code>c()</code> gives silently incorrect results:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"2020-01-01"</span>)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">datetime &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(<span class="st">"2020-01-01 09:00"</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co"># If the first argument to c() is a date, the result is a date</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5"><span class="co"># But the datetime is not converted correctly (the number of seconds</span></a>
<a class="sourceLine" id="cb27-6" data-line-number="6"><span class="co"># in the datetime is interpreted as the number of days in the date)</span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7"><span class="kw">c</span>(date, datetime)</a>
<a class="sourceLine" id="cb27-8" data-line-number="8"><span class="co">#&gt; [1] "2020-01-01"    "4322029-02-20"</span></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"></a>
<a class="sourceLine" id="cb27-10" data-line-number="10"><span class="co"># If the first argument to c() is a datetime, the result is a datetime</span></a>
<a class="sourceLine" id="cb27-11" data-line-number="11"><span class="co"># But the date is not converted correctly (the number of days in the</span></a>
<a class="sourceLine" id="cb27-12" data-line-number="12"><span class="co"># date is interpreted as the number of seconds in the date)</span></a>
<a class="sourceLine" id="cb27-13" data-line-number="13"><span class="kw">c</span>(datetime, date)</a>
<a class="sourceLine" id="cb27-14" data-line-number="14"><span class="co">#&gt; [1] "2020-01-01 09:00:00 UTC" "1970-01-01 05:04:22 UTC"</span></a></code></pre></div>
<p>When you mix dates and date-times, vctrs returns a date-time, and converts dates to date-times at midnight (in the timezone of the date-time).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(datetime, date)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="co">#&gt; [1] "2020-01-01 09:00:00 UTC" "2020-01-01 00:00:00 UTC"</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3"></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(date, datetime)</a>
<a class="sourceLine" id="cb28-5" data-line-number="5"><span class="co">#&gt; [1] "2020-01-01 00:00:00 UTC" "2020-01-01 09:00:00 UTC"</span></a>
<a class="sourceLine" id="cb28-6" data-line-number="6"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(date, datetime_nz)</a>
<a class="sourceLine" id="cb28-7" data-line-number="7"><span class="co">#&gt; [1] "2020-01-01 00:00:00 NZDT" "2020-01-01 09:00:00 NZDT"</span></a></code></pre></div>
</div>
<div id="missing-values" class="section level4">
<h4 class="hasAnchor">
<a href="#missing-values" class="anchor"></a>Missing values</h4>
<p>vctrs treats a logical vector consisting only of <code>NA</code> special: it’s an unspecified type than can be converted to any other 1d type:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="ot">NA</span>, <span class="st">"x"</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="co">#&gt; [1] NA  "x"</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="ot">NA</span>, fa)</a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="co">#&gt; [1] &lt;NA&gt; a   </span></a>
<a class="sourceLine" id="cb29-5" data-line-number="5"><span class="co">#&gt; Levels: a</span></a>
<a class="sourceLine" id="cb29-6" data-line-number="6"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="ot">NA</span>, date)</a>
<a class="sourceLine" id="cb29-7" data-line-number="7"><span class="co">#&gt; [1] NA           "2020-01-01"</span></a>
<a class="sourceLine" id="cb29-8" data-line-number="8"><span class="kw"><a href="../reference/vec_c.html">vec_c</a></span>(<span class="ot">NA</span>, datetime)</a>
<a class="sourceLine" id="cb29-9" data-line-number="9"><span class="co">#&gt; [1] NA                        "2020-01-01 09:00:00 UTC"</span></a></code></pre></div>
<p>Whereas <code>c()</code> strips the classes:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">"x"</span>)</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="co">#&gt; [1] NA  "x"</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="kw">c</span>(<span class="ot">NA</span>, fa)</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="co">#&gt; [1] NA  1</span></a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="kw">c</span>(<span class="ot">NA</span>, date)</a>
<a class="sourceLine" id="cb30-6" data-line-number="6"><span class="co">#&gt; [1]    NA 18262</span></a>
<a class="sourceLine" id="cb30-7" data-line-number="7"><span class="kw">c</span>(<span class="ot">NA</span>, datetime)</a>
<a class="sourceLine" id="cb30-8" data-line-number="8"><span class="co">#&gt; [1]         NA 1577869200</span></a></code></pre></div>
</div>
</div>
<div id="ifelse" class="section level3">
<h3 class="hasAnchor">
<a href="#ifelse" class="anchor"></a><code>ifelse()</code>
</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">typeof</span>(<span class="kw">ifelse</span>(<span class="ot">FALSE</span>, <span class="dv">1</span>, <span class="st">"x"</span>))</a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="co">#&gt; [1] "character"</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="kw">typeof</span>(<span class="kw">ifelse</span>(<span class="ot">TRUE</span>, <span class="dv">1</span>, <span class="st">"x"</span>))</a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="co">#&gt; [1] "double"</span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5"><span class="kw">typeof</span>(<span class="kw">ifelse</span>(<span class="ot">NA</span>, <span class="dv">1</span>, <span class="st">"x"</span>))</a>
<a class="sourceLine" id="cb31-6" data-line-number="6"><span class="co">#&gt; [1] "logical"</span></a></code></pre></div>
</div>
<div id="rbind-and-vec_rbind" class="section level3">
<h3 class="hasAnchor">
<a href="#rbind-and-vec_rbind" class="anchor"></a><code>rbind()</code> and <code><a href="../reference/vec_bind.html">vec_rbind()</a></code>
</h3>
<div id="variables" class="section level4">
<h4 class="hasAnchor">
<a href="#variables" class="anchor"></a>Variables</h4>
<p><code>rbind()</code> requires all inputs to have the same variables</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">y =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3"></a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="co"># rbind() requires the inputs to have identical column names</span></a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="kw">rbind</span>(df1, df2)</a>
<a class="sourceLine" id="cb32-6" data-line-number="6"><span class="co">#&gt; Error in match.names(clabs, names(xi)): names do not match previous names</span></a></code></pre></div>
<p><code><a href="../reference/vec_bind.html">vec_rbind()</a></code> takes the union of columns:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>(df1, df2)</a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="co">#&gt;      x  y</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="co">#&gt; 1 TRUE NA</span></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="co">#&gt; 2   NA  2</span></a></code></pre></div>
</div>
<div id="mixing-data-frames-and-vectors" class="section level4">
<h4 class="hasAnchor">
<a href="#mixing-data-frames-and-vectors" class="anchor"></a>Mixing data frames and vectors</h4>
<p><code>rbind()</code> can silently discard data:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">rbind</span>(<span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1000000</span>))</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="co">#&gt;   x</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="co">#&gt; 1 1</span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="co">#&gt; 2 2</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="co">#&gt; 3 3</span></a>
<a class="sourceLine" id="cb34-6" data-line-number="6"><span class="co">#&gt; 4 1</span></a></code></pre></div>
<p><code><a href="../reference/vec_bind.html">vec_rbind()</a></code> first converts any vector inputs to one-row data frames.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>(<span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1000000</span>))</a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="co">#&gt; New names:</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="co">#&gt;  -&gt; ..1</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="co">#&gt;  -&gt; ..2</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="co">#&gt;    x ..1   ..2</span></a>
<a class="sourceLine" id="cb35-6" data-line-number="6"><span class="co">#&gt; 1  1  NA    NA</span></a>
<a class="sourceLine" id="cb35-7" data-line-number="7"><span class="co">#&gt; 2  2  NA    NA</span></a>
<a class="sourceLine" id="cb35-8" data-line-number="8"><span class="co">#&gt; 3  3  NA    NA</span></a>
<a class="sourceLine" id="cb35-9" data-line-number="9"><span class="co">#&gt; 4 NA   1 1e+06</span></a></code></pre></div>
</div>
<div id="container-class" class="section level4">
<h4 class="hasAnchor">
<a href="#container-class" class="anchor"></a>Container class</h4>
<p><code>rbind()</code> uses the class of the first argument:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">tb1 &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/tibble">tibble</a></span>(<span class="dt">x =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb36-2" data-line-number="2"></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="kw">class</span>(<span class="kw">rbind</span>(tb1, df1))</a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></a>
<a class="sourceLine" id="cb36-5" data-line-number="5"><span class="kw">class</span>(<span class="kw">rbind</span>(df1, tb1))</a>
<a class="sourceLine" id="cb36-6" data-line-number="6"><span class="co">#&gt; [1] "data.frame"</span></a></code></pre></div>
<p><code><a href="../reference/vec_bind.html">vec_rbind()</a></code> uses the common class:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">class</span>(<span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>(df1, df1))</a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="co">#&gt; [1] "data.frame"</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="kw">class</span>(<span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>(tb1, df1))</a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="kw">class</span>(<span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>(df1, tb1))</a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></a></code></pre></div>
<p>Like <code><a href="../reference/vec_c.html">vec_c()</a></code> you can specify the desired output type:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>(df1, df2, <span class="dt">.ptype =</span> <span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">double</span>(), <span class="dt">y =</span> <span class="kw">double</span>()))</a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="co">#&gt;    x  y</span></a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="co">#&gt; 1  1 NA</span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="co">#&gt; 2 NA  2</span></a></code></pre></div>
</div>
<div id="empty-inputs" class="section level4">
<h4 class="hasAnchor">
<a href="#empty-inputs" class="anchor"></a>Empty inputs</h4>
<p>Because <code>rbind()</code> can produce both matrices and data frames, its identity element is <code>NULL</code>:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">rbind</span>()</a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="kw">rbind</span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="co">#&gt; NULL</span></a></code></pre></div>
<p>Because <code><a href="../reference/vec_bind.html">vec_rbind()</a></code> only produces data frames, its identity element is an empty data frame:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>()</a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="co">#&gt; data frame with 0 columns and 0 rows</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="kw"><a href="../reference/vec_bind.html">vec_rbind</a></span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb40-4" data-line-number="4"><span class="co">#&gt; data frame with 0 columns and 0 rows</span></a></code></pre></div>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Here we’ll ignore the distinction between the types of base vectors and the class of S3 vectors, using class to refer interchangeably to both.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#motivation">Motivation</a></li>
      <li><a href="#basics">Basics</a></li>
      <li><a href="#base-classes">Base classes</a></li>
      <li><a href="#base-functions">Base functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://hadley.nz">Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
